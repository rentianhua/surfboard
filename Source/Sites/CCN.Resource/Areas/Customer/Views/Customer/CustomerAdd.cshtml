
@{
    //ViewBag.Title = "CustomerEdit";
    //Layout = "~/Views/Shared/_LayoutEmpty.cshtml";
}

<script type="text/javascript">

    $(function() {

    });

    function Submit() {

        var json = {
            mobile: $("#mobile").val(),
            password: $("#password").val(),
            custname: $("#custname").val()
        };

        if ($.trim(json.mobile).length === 0) {
            alert("请填写手机号");
            return;
        }

        if ($.trim(json.password).length === 0) {
            alert("请填写密码");
            return;
        }

        var mobile = $("#mobile").val(); //获取手机号
        var telReg = !!mobile.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0678]|18[0-9]|14[57])[0-9]{8}$/);
        //如果手机号码不能通过验证
        if (!telReg) {
            alert("请填写正确的手机号");
            return;
        }

        $.post("/api/Customer/AddCustomer", json, function(result) {
            var str = "";
            switch (result.errcode) {
            case 0:
                str = "添加成功";
                break;
            case 402:
                str = "手机号被其他人注册";
                break;
            case 403:
                str = "openid已绑定其他手机号";
                break;
            case 405:
                str = "手机号不能空";
                break;
            case 404:
                str = "添加失败";
                break;
            default:
            }
            alert(str);
            getBodyHtml('mainbody', '/customer/customer/customerlist');
        });
    }

</script>
<div>
    <div style="font-size:18px;font-weight:bold;text-align:center">会员快速注册</div>
    <table id="coupon" class="gridtable">
        <tbody>
            <tr>
                <td>手机号</td>
                <td>
                    <input type="text" id="mobile" />
                </td>
            </tr>
            <tr>
                <td>密码</td>
                <td>
                    <input type="text" id="password" />
                </td>
            </tr>
            <tr>
                <td>昵称</td>
                <td>
                    <input type="text" id="custname" />
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <input type="submit" value="保存" onclick="Submit()" />
                    <input type="button" value="返回" onclick="getBodyHtml('mainbody', '/customer/customer/customerlist');" />
                </td>
            </tr>
        </tbody>
    </table>
</div>